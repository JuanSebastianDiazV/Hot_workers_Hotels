"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[4878],{4878:(B,F,i)=>{i.r(F),i.d(F,{BankInfoPageModule:()=>L});var k=i(177),l=i(4341),u=i(4742),_=i(8026),g=i(467),n=i(6276),E=i(337),p=i(8657),b=i(1626);let d=(()=>{var e;class r{constructor(t){this.http=t,this.banksUrl="assets/mocks/banks.json"}getBanks(){return this.http.get(this.banksUrl)}}return(e=r).\u0275fac=function(t){return new(t||e)(n.KVO(b.Qq))},e.\u0275prov=n.jDH({token:e,factory:e.\u0275fac,providedIn:"root"}),r})();var v=i(4708),h=i(5177),C=i(7581);function P(e,r){if(1&e&&(n.j41(0,"ion-select-option",17),n.EFF(1),n.k0s()),2&e){const a=r.$implicit;n.Y8G("value",a.id),n.R7$(1),n.JRh(a.name)}}function y(e,r){1&e&&(n.j41(0,"p"),n.EFF(1," El banco es requerido. "),n.k0s())}function j(e,r){if(1&e&&(n.j41(0,"ion-text",18),n.DNE(1,y,2,0,"p",14),n.k0s()),2&e){const a=n.XpG();let t;n.R7$(1),n.Y8G("ngIf",null==(t=a.bankInfoForm.get("bank"))||null==t.errors?null:t.errors.required)}}function A(e,r){1&e&&(n.j41(0,"p"),n.EFF(1," El tipo de cuenta es requerido. "),n.k0s())}function T(e,r){if(1&e&&(n.j41(0,"ion-text",18),n.DNE(1,A,2,0,"p",14),n.k0s()),2&e){const a=n.XpG();let t;n.R7$(1),n.Y8G("ngIf",null==(t=a.bankInfoForm.get("accountType"))||null==t.errors?null:t.errors.required)}}function x(e,r){1&e&&(n.j41(0,"ion-item")(1,"ion-label",7),n.EFF(2,"N\xfamero de Cuenta"),n.k0s(),n.nrm(3,"ion-input",19),n.k0s())}function G(e,r){1&e&&(n.j41(0,"p"),n.EFF(1," El n\xfamero de cuenta es requerido. "),n.k0s())}function S(e,r){1&e&&(n.j41(0,"p"),n.EFF(1," El n\xfamero de cuenta debe contener solo n\xfameros. "),n.k0s())}function D(e,r){if(1&e&&(n.j41(0,"ion-text",18),n.DNE(1,G,2,0,"p",14),n.DNE(2,S,2,0,"p",14),n.k0s()),2&e){const a=n.XpG();let t,o;n.R7$(1),n.Y8G("ngIf",null==(t=a.bankInfoForm.get("accountNumber"))||null==t.errors?null:t.errors.required),n.R7$(1),n.Y8G("ngIf",null==(o=a.bankInfoForm.get("accountNumber"))||null==o.errors?null:o.errors.pattern)}}function R(e,r){1&e&&(n.j41(0,"ion-item")(1,"ion-label",7),n.EFF(2,"N\xfamero de Celular"),n.k0s(),n.nrm(3,"ion-input",20),n.k0s())}function M(e,r){1&e&&(n.j41(0,"p"),n.EFF(1," El n\xfamero de celular es requerido. "),n.k0s())}function Y(e,r){1&e&&(n.j41(0,"p"),n.EFF(1," El n\xfamero de celular debe tener 10 d\xedgitos y contener solo n\xfameros. "),n.k0s())}function O(e,r){if(1&e&&(n.j41(0,"ion-text",18),n.DNE(1,M,2,0,"p",14),n.DNE(2,Y,2,0,"p",14),n.k0s()),2&e){const a=n.XpG();let t,o;n.R7$(1),n.Y8G("ngIf",null==(t=a.bankInfoForm.get("phoneNumber"))||null==t.errors?null:t.errors.required),n.R7$(1),n.Y8G("ngIf",null==(o=a.bankInfoForm.get("phoneNumber"))||null==o.errors?null:o.errors.pattern)}}function $(e,r){1&e&&n.nrm(0,"ion-spinner",21)}function U(e,r){1&e&&(n.j41(0,"span"),n.EFF(1,"Guardar"),n.k0s())}const V=[{path:"",component:(()=>{var e;class r{constructor(t,o,f,c,s,m,I){this.formBuilder=t,this.router=o,this.progressService=f,this.alertService=c,this.bankService=s,this.formService=m,this.employeeService=I,this.banks=[],this.isNequi=!1,this.isSaving=!1}ngOnInit(){var t;this.bankInfoForm=this.formBuilder.group({bank:["",l.k0.required],accountType:["",l.k0.required],accountNumber:["",[l.k0.required,l.k0.pattern("^[0-9]*$")]],phoneNumber:["",l.k0.pattern("^[0-9]{10}$")]}),this.bankService.getBanks().subscribe(o=>{this.banks=o}),this.formService.setForm("bankInfo",this.bankInfoForm),null===(t=this.bankInfoForm.get("bank"))||void 0===t||t.valueChanges.subscribe(o=>{var f,c,s,m,I,N;this.isNequi="nequi"===o.toLowerCase(),this.isNequi?(null===(s=this.bankInfoForm.get("phoneNumber"))||void 0===s||s.setValidators([l.k0.required,l.k0.pattern("^[0-9]{10}$")]),null===(m=this.bankInfoForm.get("accountNumber"))||void 0===m||m.clearValidators()):(null===(I=this.bankInfoForm.get("phoneNumber"))||void 0===I||I.clearValidators(),null===(N=this.bankInfoForm.get("accountNumber"))||void 0===N||N.setValidators([l.k0.required,l.k0.pattern("^[0-9]*$")])),null===(f=this.bankInfoForm.get("phoneNumber"))||void 0===f||f.updateValueAndValidity(),null===(c=this.bankInfoForm.get("accountNumber"))||void 0===c||c.updateValueAndValidity()})}save(){var t=this;return(0,g.A)(function*(){if(t.bankInfoForm.valid){t.isSaving=!0;const o=t.bankInfoForm.value;t.formService.setForm("bankInfo",t.bankInfoForm),t.employeeService.saveEmployeeData({bank:o.bank,accountType:o.accountType,accountNumber:t.isNequi?o.phoneNumber:o.accountNumber}).subscribe({next:(c=(0,g.A)(function*(s){console.log("Respuesta del servidor:",s),t.isSaving=!1,t.alertService.presentWarningAlert("\xa1\xc9xito!","Informaci\xf3n Bancaria Actualizada Con \xc9xito",()=>{t.router.navigate(["/profile"])})}),function(m){return c.apply(this,arguments)}),error:function(){var c=(0,g.A)(function*(s){console.error("Error al guardar la informaci\xf3n bancaria:",s),t.isSaving=!1,t.alertService.presentErrorAlert("Error","No se pudo guardar la informaci\xf3n bancaria.")});return function(m){return c.apply(this,arguments)}}()})}var c})()}}return(e=r).\u0275fac=function(t){return new(t||e)(n.rXU(l.ok),n.rXU(_.Ix),n.rXU(E.M),n.rXU(p.u),n.rXU(d),n.rXU(v.u),n.rXU(h.O))},e.\u0275cmp=n.VBU({type:e,selectors:[["app-bank-info"]],decls:32,vars:12,consts:[[1,"background-general-interior",3,"fullscreen"],[1,"form-container"],["routerLink","/profile",1,"custom-back-container"],["src","assets/images/left-chevron.png","alt","Back",1,"custom-back-icon"],[1,"ion-padding",3,"formGroup","ngSubmit"],[1,"whiteLabel","ion-text-center"],[1,"whiteLabel"],["position","floating"],["formControlName","bank"],[3,"value",4,"ngFor","ngForOf"],["color","danger",4,"ngIf"],["formControlName","accountType"],["value","ahorros"],["value","corriente"],[4,"ngIf"],["expand","block","shape","round","color","danger","type","submit",1,"ion-margin-top",3,"disabled"],["name","crescent",4,"ngIf"],[3,"value"],["color","danger"],["formControlName","accountNumber","type","number"],["formControlName","phoneNumber","type","number"],["name","crescent"]],template:function(t,o){if(1&t&&(n.j41(0,"ion-content",0),n.nrm(1,"app-button-menu-toggle"),n.j41(2,"div",1)(3,"div",2),n.nrm(4,"img",3),n.k0s(),n.j41(5,"form",4),n.bIt("ngSubmit",function(){return o.save()}),n.j41(6,"h1",5),n.EFF(7,"Informaci\xf3n Bancaria"),n.k0s(),n.j41(8,"p",6),n.EFF(9," Recuerda que la cuenta bancaria que suministres, debe estar a nombre del usuario registrado en la app "),n.k0s(),n.j41(10,"ion-item")(11,"ion-label",7),n.EFF(12,"Banco"),n.k0s(),n.j41(13,"ion-select",8),n.DNE(14,P,2,2,"ion-select-option",9),n.k0s()(),n.DNE(15,j,2,1,"ion-text",10),n.j41(16,"ion-item")(17,"ion-label",7),n.EFF(18,"Tipo de Cuenta"),n.k0s(),n.j41(19,"ion-select",11)(20,"ion-select-option",12),n.EFF(21,"Cuenta de Ahorros"),n.k0s(),n.j41(22,"ion-select-option",13),n.EFF(23,"Cuenta Corriente"),n.k0s()()(),n.DNE(24,T,2,1,"ion-text",10),n.DNE(25,x,4,0,"ion-item",14),n.DNE(26,D,3,2,"ion-text",10),n.DNE(27,R,4,0,"ion-item",14),n.DNE(28,O,3,2,"ion-text",10),n.j41(29,"ion-button",15),n.DNE(30,$,1,0,"ion-spinner",16),n.DNE(31,U,2,0,"span",14),n.k0s()()()()),2&t){let f,c,s,m;n.Y8G("fullscreen",!0),n.R7$(5),n.Y8G("formGroup",o.bankInfoForm),n.R7$(9),n.Y8G("ngForOf",o.banks),n.R7$(1),n.Y8G("ngIf",(null==(f=o.bankInfoForm.get("bank"))?null:f.touched)&&(null==(f=o.bankInfoForm.get("bank"))?null:f.invalid)),n.R7$(9),n.Y8G("ngIf",(null==(c=o.bankInfoForm.get("accountType"))?null:c.touched)&&(null==(c=o.bankInfoForm.get("accountType"))?null:c.invalid)),n.R7$(1),n.Y8G("ngIf",!o.isNequi),n.R7$(1),n.Y8G("ngIf",(null==(s=o.bankInfoForm.get("accountNumber"))?null:s.touched)&&(null==(s=o.bankInfoForm.get("accountNumber"))?null:s.invalid)),n.R7$(1),n.Y8G("ngIf",o.isNequi),n.R7$(1),n.Y8G("ngIf",(null==(m=o.bankInfoForm.get("phoneNumber"))?null:m.touched)&&(null==(m=o.bankInfoForm.get("phoneNumber"))?null:m.invalid)),n.R7$(1),n.Y8G("disabled",!o.bankInfoForm.valid||o.isSaving),n.R7$(1),n.Y8G("ngIf",o.isSaving),n.R7$(1),n.Y8G("ngIf",!o.isSaving)}},dependencies:[k.Sq,k.bT,l.qT,l.BC,l.cb,u.Jm,u.W9,u.$w,u.uz,u.he,u.Nm,u.Ip,u.w2,u.IO,u.su,u.Je,u.N7,_.Wk,C.p,l.j4,l.JD],styles:["ion-item[_ngcontent-%COMP%]{--background: transparent !important;--border-color: #fff;font-size:1.1rem}ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{color:#fff}ion-item[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{color:#f1a7a7}.form-container[_ngcontent-%COMP%]{margin-top:3rem}"]}),r})()}];let X=(()=>{var e;class r{}return(e=r).\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.$C({type:e}),e.\u0275inj=n.G2t({imports:[_.iI.forChild(V),_.iI]}),r})();var q=i(5553);let L=(()=>{var e;class r{}return(e=r).\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.$C({type:e}),e.\u0275inj=n.G2t({imports:[k.MD,l.YN,u.bv,X,q.h,l.X1]}),r})()},8657:(B,F,i)=>{i.d(F,{u:()=>_});var k=i(467),l=i(6276),u=i(4742);let _=(()=>{var g;class n{constructor(p){this.alertController=p}presentSuccessAlert(p,b,d){var v=this;return(0,k.A)(function*(){yield(yield v.alertController.create({header:p,message:b,cssClass:"successAlert",buttons:[{text:"Cerrar",cssClass:"btn-Cerrar",handler:()=>{d&&d()}}]})).present()})()}presentErrorAlert(p,b,d){var v=this;return(0,k.A)(function*(){yield(yield v.alertController.create({header:p,message:b,cssClass:"errorAlert",buttons:[{text:"Cerrar",cssClass:"btn-Cerrar",handler:()=>{d&&d()}}]})).present()})()}presentWarningAlert(p,b,d){var v=this;return(0,k.A)(function*(){yield(yield v.alertController.create({header:p,message:b,cssClass:"warningAlert",buttons:[{text:"Cerrar",cssClass:"btn-Cerrar",handler:()=>{d&&d()}}]})).present()})()}}return(g=n).\u0275fac=function(p){return new(p||g)(l.KVO(u.hG))},g.\u0275prov=l.jDH({token:g,factory:g.\u0275fac,providedIn:"root"}),n})()}}]);