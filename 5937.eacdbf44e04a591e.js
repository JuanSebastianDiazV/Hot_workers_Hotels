"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5937],{5937:(b,m,c)=>{c.r(m),c.d(m,{MyPhotosAndVideosPageModule:()=>R});var h=c(177),v=c(4341),a=c(4742),P=c(8026),u=c(467),g=c(7691),o=c(6276),l=c(2195),p=c(8657),_=c(6161),f=c(7581);function M(t,i){1&t&&(o.j41(0,"h1"),o.EFF(1,"Foto"),o.k0s())}function A(t,i){if(1&t&&o.nrm(0,"img",13),2&t){const e=o.XpG().$implicit;o.Y8G("src",e.url,o.B4B)}}function C(t,i){if(1&t){const e=o.RV6();o.j41(0,"ion-button",14),o.bIt("click",function(){o.eBV(e);const r=o.XpG().index,s=o.XpG();return o.Njj(s.selectPhotoSource(r))}),o.EFF(1,"+"),o.k0s()}}function V(t,i){if(1&t){const e=o.RV6();o.j41(0,"ion-button",15),o.bIt("click",function(){o.eBV(e);const r=o.XpG().index,s=o.XpG();return o.Njj(s.removePhoto(r))}),o.EFF(1," Eliminar "),o.k0s()}}function k(t,i){if(1&t&&(o.j41(0,"ion-col",9)(1,"ion-card"),o.DNE(2,M,2,0,"h1",7),o.DNE(3,A,1,1,"img",10),o.DNE(4,C,2,0,"ion-button",11),o.k0s(),o.DNE(5,V,2,0,"ion-button",12),o.k0s()),2&t){const e=i.$implicit;o.R7$(2),o.Y8G("ngIf",!e.url),o.R7$(1),o.Y8G("ngIf",e.url),o.R7$(1),o.Y8G("ngIf",!e.url),o.R7$(1),o.Y8G("ngIf",e.url)}}function E(t,i){1&t&&(o.j41(0,"h1"),o.EFF(1,"Video"),o.k0s())}function x(t,i){if(1&t&&o.nrm(0,"video",17),2&t){const e=o.XpG().$implicit;o.Y8G("src",e.url,o.B4B)}}function G(t,i){if(1&t){const e=o.RV6();o.j41(0,"ion-button",14),o.bIt("click",function(){o.eBV(e);const r=o.XpG().index,s=o.XpG(2);return o.Njj(s.addVideo(r))}),o.EFF(1,"+"),o.k0s()}}function j(t,i){if(1&t){const e=o.RV6();o.j41(0,"ion-button",15),o.bIt("click",function(){o.eBV(e);const r=o.XpG().index,s=o.XpG(2);return o.Njj(s.removeVideo(r))}),o.EFF(1," Eliminar "),o.k0s()}}function F(t,i){if(1&t&&(o.j41(0,"ion-col",9)(1,"ion-card"),o.DNE(2,E,2,0,"h1",7),o.DNE(3,x,1,1,"video",16),o.DNE(4,G,2,0,"ion-button",11),o.k0s(),o.DNE(5,j,2,0,"ion-button",12),o.k0s()),2&t){const e=i.$implicit;o.R7$(2),o.Y8G("ngIf",!e.url),o.R7$(1),o.Y8G("ngIf",e.url),o.R7$(1),o.Y8G("ngIf",!e.url),o.R7$(1),o.Y8G("ngIf",e.url)}}function O(t,i){if(1&t&&(o.j41(0,"ion-row")(1,"ion-col",1)(2,"h1",5),o.EFF(3,"Tus Videos"),o.k0s()(),o.DNE(4,F,6,4,"ion-col",6),o.k0s()),2&t){const e=o.XpG();o.R7$(4),o.Y8G("ngForOf",e.videos)}}const T=[{path:"",component:(()=>{var t;class i{constructor(n,r,s,d){this.cameraService=n,this.actionSheetController=r,this.alertService=s,this.buttonDataService=d,this.photos=[],this.videos=[]}ngOnInit(){this.initializeMediaArrays()}initializeMediaArrays(){this.photos=Array.from({length:5},()=>({url:null})),this.videos=Array.from({length:2},()=>({url:null}))}selectPhotoSource(n){var r=this;return(0,u.A)(function*(){yield(yield r.actionSheetController.create({header:"Selecciona una fuente",buttons:[{text:"C\xe1mara",icon:"camera",handler:()=>{r.addPhoto(n,g.ru.Camera)}},{text:"Galer\xeda",icon:"image",handler:()=>{r.addPhoto(n,g.ru.Photos)}},{text:"Cancelar",icon:"close",role:"cancel"}]})).present()})()}addPhoto(n,r){var s=this;return(0,u.A)(function*(){try{const d=yield g.i7.getPhoto({quality:90,allowEditing:!1,resultType:g.LK.DataUrl,source:r});n>=0&&n<s.photos.length&&d.dataUrl?s.photos[n].url=d.dataUrl:console.error("\xcdndice fuera de rango o dataUrl no disponible:",n,d.dataUrl)}catch(d){console.error("Error al tomar la foto",d)}})()}removePhoto(n){n>=0&&n<this.photos.length?this.photos[n].url=null:console.error("\xcdndice fuera de rango:",n)}addVideo(n){var r=this;return(0,u.A)(function*(){const s=document.createElement("input");s.type="file",s.accept="video/*",s.onchange=()=>{var d;const y=null===(d=s.files)||void 0===d?void 0:d[0];if(y&&n>=0&&n<r.videos.length){const S=URL.createObjectURL(y);r.videos[n].url=S}},s.click()})()}removeVideo(n){n>=0&&n<this.videos.length?this.videos[n].url=null:console.error("\xcdndice fuera de rango:",n)}saveMedia(){this.alertService.presentErrorAlert("Error","Hubo un problema con el guardado de fotos."),this.cameraService.saveMedia({photos:this.photos,videos:this.videos}).subscribe(n=>{console.log("Media guardada",n)})}getClickedButton(){return this.buttonDataService.getClickedButton()}}return(t=i).\u0275fac=function(n){return new(n||t)(o.rXU(l.j),o.rXU(a.GD),o.rXU(p.u),o.rXU(_.g))},t.\u0275cmp=o.VBU({type:t,selectors:[["app-my-photos-and-videos"]],decls:18,vars:3,consts:[[1,"background-general-interior",3,"fullscreen"],["size","12"],["expand","block","fill","clear","routerLink","/photos-videos"],[1,"custom-back-container"],["src","assets/images/left-chevron.png","alt","Back",1,"custom-back-icon"],[1,"ion-text-center","whiteLabel"],["size","6",4,"ngFor","ngForOf"],[4,"ngIf"],["expand","block","shape","round","color","danger",3,"click"],["size","6"],[3,"src",4,"ngIf"],[3,"click",4,"ngIf"],["expand","block","shape","round","color","medium",3,"click",4,"ngIf"],[3,"src"],[3,"click"],["expand","block","shape","round","color","medium",3,"click"],["controls","",3,"src",4,"ngIf"],["controls","",3,"src"]],template:function(n,r){1&n&&(o.j41(0,"ion-content",0),o.nrm(1,"app-button-menu-toggle"),o.j41(2,"ion-grid")(3,"ion-row")(4,"ion-col",1)(5,"ion-button",2)(6,"div",3),o.nrm(7,"img",4),o.k0s()()()(),o.j41(8,"ion-row")(9,"ion-col",1)(10,"h1",5),o.EFF(11,"Tus Fotos"),o.k0s()(),o.DNE(12,k,6,4,"ion-col",6),o.k0s(),o.DNE(13,O,5,1,"ion-row",7),o.j41(14,"ion-row")(15,"ion-col",1)(16,"ion-button",8),o.bIt("click",function(){return r.saveMedia()}),o.EFF(17,"Guardar"),o.k0s()()()()()),2&n&&(o.Y8G("fullscreen",!0),o.R7$(12),o.Y8G("ngForOf",r.photos),o.R7$(1),o.Y8G("ngIf","Worker"===r.getClickedButton()))},dependencies:[h.Sq,h.bT,a.Jm,a.b_,a.hU,a.W9,a.lO,a.ln,a.N7,P.Wk,f.p],styles:['@charset "UTF-8";ion-header[_ngcontent-%COMP%]{background:#1a1a1a}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{--background: #1a1a1a;color:#fff}ion-title[_ngcontent-%COMP%]{text-align:center;font-size:24px;color:#fff}ion-grid[_ngcontent-%COMP%]{padding:15px}ion-card[_ngcontent-%COMP%]{background:rgba(255,255,255,.1);border-radius:10px;display:flex;justify-content:center;align-items:center;height:150px;margin:10px 0}ion-card[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{margin:5px;--background: #c8102e;--border-radius: 5px;--padding-start: 10px;--padding-end: 10px}ion-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], ion-card[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{max-height:100%;max-width:100%;border-radius:10px}ion-button.expand-full[_ngcontent-%COMP%]{margin-top:20px;--background: #c8102e;--border-radius: 10px;--padding-start: 15px;--padding-end: 15px;font-size:18px}.custom-back-container[_ngcontent-%COMP%]{pointer-events:auto;z-index:1}.custom-back-icon[_ngcontent-%COMP%]{cursor:pointer}']}),i})()}];let I=(()=>{var t;class i{}return(t=i).\u0275fac=function(n){return new(n||t)},t.\u0275mod=o.$C({type:t}),t.\u0275inj=o.G2t({imports:[P.iI.forChild(T),P.iI]}),i})();var D=c(5553);let R=(()=>{var t;class i{}return(t=i).\u0275fac=function(n){return new(n||t)},t.\u0275mod=o.$C({type:t}),t.\u0275inj=o.G2t({imports:[h.MD,v.YN,a.bv,I,D.h]}),i})()},8657:(b,m,c)=>{c.d(m,{u:()=>P});var h=c(467),v=c(6276),a=c(4742);let P=(()=>{var u;class g{constructor(l){this.alertController=l}presentSuccessAlert(l,p,_){var f=this;return(0,h.A)(function*(){yield(yield f.alertController.create({header:l,message:p,cssClass:"successAlert",buttons:[{text:"Cerrar",cssClass:"btn-Cerrar",handler:()=>{_&&_()}}]})).present()})()}presentErrorAlert(l,p,_){var f=this;return(0,h.A)(function*(){yield(yield f.alertController.create({header:l,message:p,cssClass:"errorAlert",buttons:[{text:"Cerrar",cssClass:"btn-Cerrar",handler:()=>{_&&_()}}]})).present()})()}presentWarningAlert(l,p,_){var f=this;return(0,h.A)(function*(){yield(yield f.alertController.create({header:l,message:p,cssClass:"warningAlert",buttons:[{text:"Cerrar",cssClass:"btn-Cerrar",handler:()=>{_&&_()}}]})).present()})()}}return(u=g).\u0275fac=function(l){return new(l||u)(v.KVO(a.hG))},u.\u0275prov=v.jDH({token:u,factory:u.\u0275fac,providedIn:"root"}),g})()}}]);