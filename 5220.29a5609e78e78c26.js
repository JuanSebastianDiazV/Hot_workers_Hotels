"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5220],{5220:(b,h,i)=>{i.r(h),i.d(h,{EntryFormPageModule:()=>M});var F=i(177),s=i(4341),a=i(4742),v=i(8026),c=i(467),r=i(6276),E=i(8657),m=i(6161),f=i(4567),p=i(4708),_=i(3561);function y(o,l){1&o&&(r.j41(0,"p"),r.EFF(1,"Usuario es requerido."),r.k0s())}function C(o,l){if(1&o&&(r.j41(0,"ion-text",19),r.DNE(1,y,2,0,"p",7),r.k0s()),2&o){const n=r.XpG(2);let e;r.R7$(1),r.Y8G("ngIf",null==(e=n.loginForm.get("username"))||null==e.errors?null:e.errors.required)}}function k(o,l){1&o&&(r.j41(0,"p"),r.EFF(1,"Contrase\xf1a es requerida."),r.k0s())}function P(o,l){if(1&o&&(r.j41(0,"ion-text",19),r.DNE(1,k,2,0,"p",7),r.k0s()),2&o){const n=r.XpG(2);let e;r.R7$(1),r.Y8G("ngIf",null==(e=n.loginForm.get("password"))||null==e.errors?null:e.errors.required)}}const x=function(){return["/register-general"]},j=function(){return["/reset-password"]};function U(o,l){if(1&o){const n=r.RV6();r.j41(0,"form",8),r.bIt("ngSubmit",function(){r.eBV(n);const t=r.XpG();return r.Njj(t.onSubmit())}),r.j41(1,"ion-item")(2,"ion-label",9),r.EFF(3,"Usuario"),r.k0s(),r.nrm(4,"ion-input",10),r.k0s(),r.DNE(5,C,2,1,"ion-text",11),r.j41(6,"ion-item")(7,"ion-label",9),r.EFF(8,"Contrase\xf1a"),r.k0s(),r.nrm(9,"ion-input",12),r.k0s(),r.DNE(10,P,2,1,"ion-text",11),r.j41(11,"div",13)(12,"ion-button",14),r.EFF(13,"Iniciar sesi\xf3n"),r.k0s(),r.j41(14,"ion-button",15),r.EFF(15,"Registrarme"),r.k0s()(),r.j41(16,"div",16)(17,"ion-button",17),r.EFF(18,"Recuperar Contrase\xf1a"),r.k0s(),r.j41(19,"ion-button",18),r.bIt("click",function(){r.eBV(n);const t=r.XpG();return r.Njj(t.onRecuperarUsuarioClick())}),r.EFF(20,"Recuperar usuario"),r.k0s()()()}if(2&o){const n=r.XpG();let e,t;r.Y8G("formGroup",n.loginForm),r.R7$(5),r.Y8G("ngIf",(null==(e=n.loginForm.get("username"))?null:e.touched)&&(null==(e=n.loginForm.get("username"))?null:e.invalid)),r.R7$(5),r.Y8G("ngIf",(null==(t=n.loginForm.get("password"))?null:t.touched)&&(null==(t=n.loginForm.get("password"))?null:t.invalid)),r.R7$(2),r.Y8G("disabled",!n.loginForm.valid),r.R7$(2),r.Y8G("routerLink",r.lJ4(6,x)),r.R7$(3),r.Y8G("routerLink",r.lJ4(7,j))}}function G(o,l){1&o&&(r.j41(0,"p"),r.EFF(1,"Correo es requerido."),r.k0s())}function R(o,l){1&o&&(r.j41(0,"p"),r.EFF(1,"Correo no es v\xe1lido."),r.k0s())}function $(o,l){if(1&o&&(r.j41(0,"ion-text",19),r.DNE(1,G,2,0,"p",7),r.DNE(2,R,2,0,"p",7),r.k0s()),2&o){const n=r.XpG(2);let e,t;r.R7$(1),r.Y8G("ngIf",null==(e=n.recuperarUsuarioForm.get("resetUser"))||null==e.errors?null:e.errors.required),r.R7$(1),r.Y8G("ngIf",null==(t=n.recuperarUsuarioForm.get("resetUser"))||null==t.errors?null:t.errors.email)}}function A(o,l){if(1&o){const n=r.RV6();r.j41(0,"form",8),r.bIt("ngSubmit",function(){r.eBV(n);const t=r.XpG();return r.Njj(t.onSubmitRecuperacion())}),r.j41(1,"div")(2,"h1"),r.EFF(3,"Recuperaci\xf3n de usuario"),r.k0s(),r.j41(4,"p"),r.EFF(5,"Estimado usuario, por favor ingresa el correo que tienes registrado para poder enviarte tu usuario"),r.k0s(),r.j41(6,"ion-item")(7,"ion-label",9),r.EFF(8,"Correo registrado"),r.k0s(),r.nrm(9,"ion-input",20),r.k0s(),r.DNE(10,$,3,2,"ion-text",11),r.k0s(),r.j41(11,"div",13)(12,"ion-button",21),r.EFF(13,"Enviar solicitud"),r.k0s(),r.j41(14,"ion-button",22),r.bIt("click",function(){r.eBV(n);const t=r.XpG();return r.Njj(t.onCancelarRecuperacionClick())}),r.EFF(15,"Cancelar"),r.k0s()()()}if(2&o){const n=r.XpG();let e;r.Y8G("formGroup",n.recuperarUsuarioForm),r.R7$(10),r.Y8G("ngIf",(null==(e=n.recuperarUsuarioForm.get("resetUser"))?null:e.touched)&&(null==(e=n.recuperarUsuarioForm.get("resetUser"))?null:e.invalid)),r.R7$(2),r.Y8G("disabled",!n.recuperarUsuarioForm.valid)}}function L(o,l){1&o&&r.nrm(0,"ion-loading")}const S=[{path:"",component:(()=>{var o;class l{constructor(e,t,g,d,u,T,V,X,N){this.menuCtrl=e,this.alertService=t,this.buttonDataService=g,this.formBuilder=d,this.loginService=u,this.loadingController=T,this.router=V,this.formService=X,this.authService=N,this.showLoginForm=!0,this.isLoading=!1,this.loginForm=this.formBuilder.group({username:["",s.k0.required],password:["",s.k0.required],type:["E",s.k0.required]}),this.formService.setForm("loginForm",this.loginForm),this.recuperarUsuarioForm=this.formBuilder.group({resetUser:["",[s.k0.required,s.k0.email]]})}ngOnInit(){this.menuCtrl.enable(!1)}getClickedButton(){return this.buttonDataService.getClickedButton()}onSubmit(){var e=this;return(0,c.A)(function*(){if(e.loginForm.valid){yield e.presentLoading();const{username:t,password:g,type:d}=e.loginForm.value;try{const u=yield e.loginService.login(t,g,d).toPromise();u&&u.user&&u.user.id?(e.authService.setUserId(u.user.id),e.menuCtrl.enable(!0),e.router.navigate(["/home"]),console.log("Login exitoso",u.user)):(console.log("Login fallido"),yield e.alertService.presentErrorAlert("Error",(null==u?void 0:u.message)||"Login fallido."))}catch(u){console.error("Error en el inicio de sesi\xf3n:",u),yield e.alertService.presentErrorAlert("Error","Hubo un problema con el inicio de sesi\xf3n.")}finally{yield e.dismissLoading()}}else yield e.alertService.presentErrorAlert("Advertencia","Por favor, complete todos los campos del formulario.")})()}onRecuperarUsuarioClick(){var e,t,g,d;this.showLoginForm=!1,null===(e=this.loginForm.get("username"))||void 0===e||e.clearValidators(),null===(t=this.loginForm.get("username"))||void 0===t||t.updateValueAndValidity(),null===(g=this.loginForm.get("password"))||void 0===g||g.clearValidators(),null===(d=this.loginForm.get("password"))||void 0===d||d.updateValueAndValidity()}onCancelarRecuperacionClick(){this.showLoginForm=!0,this.resetLoginForm(),this.recuperarUsuarioForm.reset()}onSubmitRecuperacion(){var e=this;return(0,c.A)(function*(){e.recuperarUsuarioForm.valid?(console.log("Formulario v\xe1lido:",e.recuperarUsuarioForm.value),yield e.alertService.presentWarningAlert("\xa1Solicitud enviada!","Estimado usuario, a tu correo registrado hemos enviado tu usuario.",()=>{e.showLoginForm=!0,e.resetLoginForm(),e.recuperarUsuarioForm.reset()})):yield e.alertService.presentErrorAlert("Advertencia","Por favor, ingrese un correo v\xe1lido.")})()}resetLoginForm(){var e,t,g,d;this.loginForm.reset(),null===(e=this.loginForm.get("username"))||void 0===e||e.setValidators(s.k0.required),null===(t=this.loginForm.get("username"))||void 0===t||t.updateValueAndValidity(),null===(g=this.loginForm.get("password"))||void 0===g||g.setValidators(s.k0.required),null===(d=this.loginForm.get("password"))||void 0===d||d.updateValueAndValidity()}presentLoading(){var e=this;return(0,c.A)(function*(){e.isLoading=!0;const t=yield e.loadingController.create({message:"Iniciando sesi\xf3n...",cssClass:"custom-loader",backdropDismiss:!0});yield t.present(),t.onDidDismiss().then(()=>{e.isLoading=!1})})()}dismissLoading(){var e=this;return(0,c.A)(function*(){return e.isLoading?(e.isLoading=!1,yield e.loadingController.dismiss().catch(()=>{})):Promise.resolve()})()}}return(o=l).\u0275fac=function(e){return new(e||o)(r.rXU(a._t),r.rXU(E.u),r.rXU(m.g),r.rXU(s.ok),r.rXU(f.H),r.rXU(a.Xi),r.rXU(v.Ix),r.rXU(p.u),r.rXU(_.u))},o.\u0275cmp=r.VBU({type:o,selectors:[["app-entry-form"]],decls:11,vars:5,consts:[[1,"background-general-interior",3,"fullscreen"],["routerLink","/landing",1,"custom-back-container"],["src","assets/images/left-chevron.png","alt","Back",1,"custom-back-icon"],["src","/assets/images/Logo.png",1,"logoHot"],[1,"labelBold","tittleUser"],[1,"card-contend"],[3,"formGroup","ngSubmit",4,"ngIf"],[4,"ngIf"],[3,"formGroup","ngSubmit"],["position","floating"],["formControlName","username","type","text"],["color","danger",4,"ngIf"],["formControlName","password","type","password"],[1,"session-buttons"],["shape","round","expand","block","type","submit","color","danger",1,"ion-margin-bottom",3,"disabled"],["shape","round","expand","block","type","button","color","primary",3,"routerLink"],[1,"ion-margin-top"],["shape","round","expand","block","type","button",1,"button-transparent",3,"routerLink"],["shape","round","expand","block","type","button",1,"button-transparent",3,"click"],["color","danger"],["formControlName","resetUser","type","email"],["shape","round","expand","block","type","submit","color","danger",3,"disabled"],["shape","round","expand","block","type","button","color","medium",1,"ion-margin-top",3,"click"]],template:function(e,t){1&e&&(r.j41(0,"ion-content",0)(1,"div",1),r.nrm(2,"img",2),r.k0s(),r.j41(3,"div"),r.nrm(4,"img",3),r.j41(5,"h1",4),r.EFF(6),r.k0s()(),r.j41(7,"ion-card",5),r.DNE(8,U,21,8,"form",6),r.DNE(9,A,16,3,"form",6),r.k0s(),r.DNE(10,L,1,0,"ion-loading",7),r.k0s()),2&e&&(r.Y8G("fullscreen",!0),r.R7$(6),r.JRh(t.getClickedButton()),r.R7$(2),r.Y8G("ngIf",t.showLoginForm),r.R7$(1),r.Y8G("ngIf",!t.showLoginForm),r.R7$(1),r.Y8G("ngIf",t.isLoading))},dependencies:[F.bT,s.qT,s.BC,s.cb,s.j4,s.JD,a.Jm,a.b_,a.W9,a.$w,a.uz,a.he,a.rQ,a.IO,a.Gw,a.N7,v.Wk],styles:[".btn[_ngcontent-%COMP%]{text-transform:uppercase;transition:all .3s;font-size:.9rem;font-weight:700;padding:.5rem 2rem;--border-radius: 24px}.button-transparent[_ngcontent-%COMP%]{--background: transparent !important;--box-shadow: none;color:#fff;font-size:.75rem}ion-item[_ngcontent-%COMP%]{--background: transparent !important;--border-color: #fff;font-size:1.1rem}ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{color:#fff}ion-item[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{color:#f1a7a7}.tittleUser[_ngcontent-%COMP%]{text-align:center;color:#fff;font-size:3rem}.logoHot[_ngcontent-%COMP%]{margin-top:0vh}.session-buttons[_ngcontent-%COMP%]{margin-top:3.5rem}"]}),l})()}];let I=(()=>{var o;class l{}return(o=l).\u0275fac=function(e){return new(e||o)},o.\u0275mod=r.$C({type:o}),o.\u0275inj=r.G2t({imports:[v.iI.forChild(S),v.iI]}),l})();var D=i(1626);let M=(()=>{var o;class l{}return(o=l).\u0275fac=function(e){return new(e||o)},o.\u0275mod=r.$C({type:o}),o.\u0275inj=r.G2t({imports:[F.MD,s.YN,s.X1,a.bv,D.q1,I]}),l})()},8657:(b,h,i)=>{i.d(h,{u:()=>v});var F=i(467),s=i(6276),a=i(4742);let v=(()=>{var c;class r{constructor(m){this.alertController=m}presentSuccessAlert(m,f,p){var _=this;return(0,F.A)(function*(){yield(yield _.alertController.create({header:m,message:f,cssClass:"successAlert",buttons:[{text:"Cerrar",cssClass:"btn-Cerrar",handler:()=>{p&&p()}}]})).present()})()}presentErrorAlert(m,f,p){var _=this;return(0,F.A)(function*(){yield(yield _.alertController.create({header:m,message:f,cssClass:"errorAlert",buttons:[{text:"Cerrar",cssClass:"btn-Cerrar",handler:()=>{p&&p()}}]})).present()})()}presentWarningAlert(m,f,p){var _=this;return(0,F.A)(function*(){yield(yield _.alertController.create({header:m,message:f,cssClass:"warningAlert",buttons:[{text:"Cerrar",cssClass:"btn-Cerrar",handler:()=>{p&&p()}}]})).present()})()}}return(c=r).\u0275fac=function(m){return new(m||c)(s.KVO(a.hG))},c.\u0275prov=s.jDH({token:c,factory:c.\u0275fac,providedIn:"root"}),r})()}}]);