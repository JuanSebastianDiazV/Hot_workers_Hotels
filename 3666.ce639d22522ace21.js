"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3666],{3666:(V,d,i)=>{i.r(d),i.d(d,{RatesPageModule:()=>U});var v=i(177),l=i(4341),g=i(4742),f=i(8026),h=i(467),F=i(7586),e=i(6276),R=i(337),_=i(8657),I=i(5312),x=i(1626);let E=(()=>{var t;class o{constructor(r){this.http=r,this.apiUrl=`${I.c.urlBase}api/TimeItems`}updateTimeItem(r,n){return this.http.put(`${this.apiUrl}/id/${r}`,n)}}return(t=o).\u0275fac=function(r){return new(r||t)(e.KVO(x.Qq))},t.\u0275prov=e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"}),o})();var P=i(3561),y=i(7581);function k(t,o){1&t&&(e.j41(0,"p"),e.EFF(1,"La tarifa de 30 minutos es requerida."),e.k0s())}function S(t,o){if(1&t&&(e.j41(0,"ion-text",16),e.DNE(1,k,2,0,"p",15),e.k0s()),2&t){const a=e.XpG();let r;e.R7$(1),e.Y8G("ngIf",null==(r=a.ratesForm.get("thirtyMinutes"))||null==r.errors?null:r.errors.required)}}function j(t,o){1&t&&(e.j41(0,"p"),e.EFF(1,"La tarifa de 1 hora es requerida."),e.k0s())}function T(t,o){if(1&t&&(e.j41(0,"ion-text",16),e.DNE(1,j,2,0,"p",15),e.k0s()),2&t){const a=e.XpG();let r;e.R7$(1),e.Y8G("ngIf",null==(r=a.ratesForm.get("oneHour"))||null==r.errors?null:r.errors.required)}}function G(t,o){1&t&&(e.j41(0,"p"),e.EFF(1,"La tarifa de 3 horas es requerida."),e.k0s())}function b(t,o){if(1&t&&(e.j41(0,"ion-text",16),e.DNE(1,G,2,0,"p",15),e.k0s()),2&t){const a=e.XpG();let r;e.R7$(1),e.Y8G("ngIf",null==(r=a.ratesForm.get("threeHours"))||null==r.errors?null:r.errors.required)}}function C(t,o){1&t&&(e.j41(0,"p"),e.EFF(1,"La tarifa de amanecida es requerida."),e.k0s())}function M(t,o){if(1&t&&(e.j41(0,"ion-text",16),e.DNE(1,C,2,0,"p",15),e.k0s()),2&t){const a=e.XpG();let r;e.R7$(1),e.Y8G("ngIf",null==(r=a.ratesForm.get("overnight"))||null==r.errors?null:r.errors.required)}}function $(t,o){1&t&&(e.j41(0,"p"),e.EFF(1,"La tarifa por d\xeda es requerida."),e.k0s())}function D(t,o){if(1&t&&(e.j41(0,"ion-text",16),e.DNE(1,$,2,0,"p",15),e.k0s()),2&t){const a=e.XpG();let r;e.R7$(1),e.Y8G("ngIf",null==(r=a.ratesForm.get("dayRate"))||null==r.errors?null:r.errors.required)}}function N(t,o){1&t&&e.nrm(0,"ion-spinner",17)}function Y(t,o){1&t&&(e.j41(0,"span"),e.EFF(1,"Guardar"),e.k0s())}const H=[{path:"",component:(()=>{var t;class o{constructor(r,n,s,m,u,c){this.formBuilder=r,this.router=n,this.progressService=s,this.alertService=m,this.timeItemsService=u,this.authService=c,this.isSaving=!1}ngOnInit(){this.ratesForm=this.formBuilder.group({thirtyMinutes:["",l.k0.required],oneHour:["",l.k0.required],threeHours:["",l.k0.required],overnight:["",l.k0.required],dayRate:["",l.k0.required]}),this.initializeValueChanges()}initializeValueChanges(){Object.keys(this.ratesForm.controls).forEach(r=>{var n;null===(n=this.ratesForm.get(r))||void 0===n||n.valueChanges.subscribe(s=>{if(s){const u=this.formatValue(s);var m;u!==s&&(null===(m=this.ratesForm.get(r))||void 0===m||m.setValue(u,{emitEvent:!1}))}})})}formatValue(r){const n=r.replace(/\D/g,"");return parseFloat(n).toLocaleString("es-CO",{minimumFractionDigits:0})}save(){var u,r=this;if(this.ratesForm.valid){this.isSaving=!0;const n=this.ratesForm.value,s=this.authService.getUserId();if(!s)return this.isSaving=!1,void this.alertService.presentErrorAlert("Error","ID del usuario no disponible.");const m={cost:n.thirtyMinutes.replace(/,/g,""),cost1:n.oneHour.replace(/,/g,""),cost2:n.threeHours.replace(/,/g,""),cost3:n.overnight.replace(/,/g,""),cost4:n.dayRate.replace(/,/g,""),updatedAt:F().toISOString()};this.timeItemsService.updateTimeItem(s,m).subscribe({next:(u=(0,h.A)(function*(c){r.isSaving=!1,r.progressService.updateProgress("rates"),r.alertService.presentWarningAlert("\xa1\xc9xito!","Tus Tarifas Han Sido Actualizadas Con \xc9xito",()=>{r.router.navigate(["/profile"])})}),function(p){return u.apply(this,arguments)}),error:function(){var u=(0,h.A)(function*(c){console.error("Error al actualizar las tarifas:",c),r.isSaving=!1,r.alertService.presentErrorAlert("Error","Hubo un problema actualizando las tarifas.")});return function(p){return u.apply(this,arguments)}}()})}}}return(t=o).\u0275fac=function(r){return new(r||t)(e.rXU(l.ok),e.rXU(f.Ix),e.rXU(R.M),e.rXU(_.u),e.rXU(E),e.rXU(P.u))},t.\u0275cmp=e.VBU({type:t,selectors:[["app-rates"]],decls:41,vars:10,consts:[[1,"background-general-interior",3,"fullscreen"],[1,"form-container"],["routerLink","/profile",1,"custom-back-container"],["src","assets/images/left-chevron.png","alt","Back",1,"custom-back-icon"],[1,"ion-padding",3,"formGroup","ngSubmit"],[1,"whiteLabel","ion-text-center"],["position","floating"],["formControlName","thirtyMinutes","type","text"],["color","danger",4,"ngIf"],["formControlName","oneHour","type","text"],["formControlName","threeHours","type","text"],["formControlName","overnight","type","text"],["formControlName","dayRate","type","text"],["shape","round","color","danger","expand","block","type","submit",1,"ion-margin-top",3,"disabled"],["name","crescent",4,"ngIf"],[4,"ngIf"],["color","danger"],["name","crescent"]],template:function(r,n){if(1&r&&(e.j41(0,"ion-content",0),e.nrm(1,"app-button-menu-toggle"),e.j41(2,"div",1)(3,"div",2),e.nrm(4,"img",3),e.k0s(),e.j41(5,"form",4),e.bIt("ngSubmit",function(){return n.save()}),e.j41(6,"h1",5),e.EFF(7,"Tarifas"),e.k0s(),e.j41(8,"p",5),e.EFF(9," Recuerda colocar las tarifas, en pesos Colombianos"),e.nrm(10,"br"),e.j41(11,"strong"),e.EFF(12,"Debes colocar la tarifa plena de todos los servicios que ofreces"),e.k0s()(),e.j41(13,"ion-item")(14,"ion-label",6),e.EFF(15,"$ 30 minutos"),e.k0s(),e.nrm(16,"ion-input",7),e.k0s(),e.DNE(17,S,2,1,"ion-text",8),e.j41(18,"ion-item")(19,"ion-label",6),e.EFF(20,"$ 1 hora"),e.k0s(),e.nrm(21,"ion-input",9),e.k0s(),e.DNE(22,T,2,1,"ion-text",8),e.j41(23,"ion-item")(24,"ion-label",6),e.EFF(25,"$ 3 horas"),e.k0s(),e.nrm(26,"ion-input",10),e.k0s(),e.DNE(27,b,2,1,"ion-text",8),e.j41(28,"ion-item")(29,"ion-label",6),e.EFF(30,"$ Amanecida"),e.k0s(),e.nrm(31,"ion-input",11),e.k0s(),e.DNE(32,M,2,1,"ion-text",8),e.j41(33,"ion-item")(34,"ion-label",6),e.EFF(35,"$ Tarifa por d\xeda"),e.k0s(),e.nrm(36,"ion-input",12),e.k0s(),e.DNE(37,D,2,1,"ion-text",8),e.j41(38,"ion-button",13),e.DNE(39,N,1,0,"ion-spinner",14),e.DNE(40,Y,2,0,"span",15),e.k0s()()()()),2&r){let s,m,u,c,p;e.Y8G("fullscreen",!0),e.R7$(5),e.Y8G("formGroup",n.ratesForm),e.R7$(12),e.Y8G("ngIf",(null==(s=n.ratesForm.get("thirtyMinutes"))?null:s.touched)&&(null==(s=n.ratesForm.get("thirtyMinutes"))?null:s.invalid)),e.R7$(5),e.Y8G("ngIf",(null==(m=n.ratesForm.get("oneHour"))?null:m.touched)&&(null==(m=n.ratesForm.get("oneHour"))?null:m.invalid)),e.R7$(5),e.Y8G("ngIf",(null==(u=n.ratesForm.get("threeHours"))?null:u.touched)&&(null==(u=n.ratesForm.get("threeHours"))?null:u.invalid)),e.R7$(5),e.Y8G("ngIf",(null==(c=n.ratesForm.get("overnight"))?null:c.touched)&&(null==(c=n.ratesForm.get("overnight"))?null:c.invalid)),e.R7$(5),e.Y8G("ngIf",(null==(p=n.ratesForm.get("dayRate"))?null:p.touched)&&(null==(p=n.ratesForm.get("dayRate"))?null:p.invalid)),e.R7$(1),e.Y8G("disabled",!n.ratesForm.valid||n.isSaving),e.R7$(1),e.Y8G("ngIf",n.isSaving),e.R7$(1),e.Y8G("ngIf",!n.isSaving)}},dependencies:[v.bT,l.qT,l.BC,l.cb,g.Jm,g.W9,g.$w,g.uz,g.he,g.w2,g.IO,g.Gw,g.N7,f.Wk,y.p,l.j4,l.JD],styles:["ion-item[_ngcontent-%COMP%]{--background: transparent !important;--border-color: #fff;font-size:1.1rem}ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{color:#fff}ion-item[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{color:#f1a7a7}.form-container[_ngcontent-%COMP%]{margin-top:3rem}"]}),o})()}];let O=(()=>{var t;class o{}return(t=o).\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[f.iI.forChild(H),f.iI]}),o})();var X=i(5553);let U=(()=>{var t;class o{}return(t=o).\u0275fac=function(r){return new(r||t)},t.\u0275mod=e.$C({type:t}),t.\u0275inj=e.G2t({imports:[v.MD,l.YN,g.bv,O,X.h,l.X1]}),o})()}}]);